!function(e,t,n,i){"use strict";function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function a(e,t){this.el=e,this.options=r({},this.options),r(this.options,t),this.menus=[].slice.call(this.el.querySelectorAll(".znSdHead-menuList")),this.current=0,this._init()}function s(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function o(e,t){(c(e,t)?h:l)(e,t)}e(n).ready(function(){!function(){var n=function(){return"_"+Math.random().toString(36).substr(2,9)},i=e("#zn-side-header"),r=e("#side-main-nav"),s=e("#side-main-menu"),o=parseInt(i.attr("data-minimize"));if(e(t).on("debouncedresize",function(){t.matchMedia("(min-width: "+(o+1)+"px)").matches?i.removeClass("is-opened is-under-minimize"):i.hasClass("is-under-minimize")||i.addClass("is-under-minimize")}).trigger("debouncedresize"),e("#znSdHead-burger").on("click",function(e){!i.hasClass("is-opened")&&t.matchMedia("(max-width: "+o+"px)").matches?i.addClass("is-opened"):i.removeClass("is-opened")}),s.addClass("is-loaded"),s.hasClass("side-main-menu--depth1"))e.each(r.find("li a"),function(t,n){e(n).on("click",function(e){return i.removeClass("is-opened"),!0})});else{r.find("ul").each(function(t,i){var a=e(i),s=n();a.prev("a").attr("data-submenu",s),a.attr("data-menu",s),a.detach().insertAfter(r)});var m=!!s.is("[data-show-breadcrumbs]");new a(s[0],{breadcrumbsCtrl:m,initialBreadcrumb:s.is("[data-breadcrumb-text]")?s.attr("data-breadcrumb-text"):"",backCtrl:!0,onItemClick:function(){i.removeClass("is-opened")}})}}()});var m={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},u=m[Modernizr.prefixed("animation")],d=function(e,t){var n=function(e){e.target==this&&(this.removeEventListener(u,n),t&&"function"==typeof t&&t.call())};e.addEventListener(u,n)};a.prototype.options={breadcrumbsCtrl:!0,initialBreadcrumb:"all",backCtrl:!0,itemsDelayInterval:60,heightTolerance:70,direction:"r2l",onItemClick:function(e,t){return!1}},a.prototype._init=function(){this.menusArr=[];var e=this;this.menus.forEach(function(t,n){var i={menuEl:t,menuItems:[].slice.call(t.querySelectorAll(".znSdHead-menuList-item"))};e.menusArr.push(i),n===e.current&&(b.add(t,"znSdHead-menuList--current"),b.remove(t,"is-first"))});var t=e.el.querySelector(".znSdHead-menuList--current");if(e.el.style.minHeight=t.clientHeight+e.options.heightTolerance+"px",this.options.backCtrl){var i=n.getElementById("znSdHead-menuBack");i?this.backCtrl=i:(this.backCtrl=n.createElement("button"),this.backCtrl.className="znSdHead-menuBack znSdHead-menuBack--hidden",this.backCtrl.setAttribute("aria-label","Go back"),this.backCtrl.innerHTML='<span class="icon-znshfont-arrow-left"></span>',this.el.insertBefore(this.backCtrl,this.el.firstChild))}if(e.options.breadcrumbsCtrl){var r=n.getElementById("znSdHead-menuBrc");r?(this.breadcrumbsCtrl=r,this._emptyBreadcrumb()):(this.breadcrumbsCtrl=n.createElement("nav"),this.breadcrumbsCtrl.className="znSdHead-menuBrc",this.el.insertBefore(this.breadcrumbsCtrl,this.el.firstChild)),this._addBreadcrumb(0)}this._initEvents()},a.prototype._initEvents=function(){for(var e=this,t=0,n=this.menusArr.length;t<n;++t)this.menusArr[t].menuItems.forEach(function(t,n){t.querySelector("a").addEventListener("click",function(t){var i=t.target.getAttribute("data-submenu"),r=t.target.innerHTML,a=e.el.querySelector('ul[data-menu="'+i+'"]');if(i&&a)t.preventDefault(),e._openSubMenu(a,n,r);else{e.el.querySelector(".znSdHead-menuList-link--current")&&b.remove(e.el.querySelector(".znSdHead-menuList-link--current"),"znSdHead-menuList-link--current"),b.add(t.target,"znSdHead-menuList-link--current"),e.options.onItemClick(t,r)}})});this.options.backCtrl&&this.backCtrl.addEventListener("click",function(){e._back()})},a.prototype._openSubMenu=function(e,t,n){if(this.isAnimating)return!1;this.isAnimating=!0,this.menusArr[this.menus.indexOf(e)].backIdx=this.current,this.menusArr[this.menus.indexOf(e)].name=n,this._menuOut(t),this._menuIn(e,t)},a.prototype._back=function(){if(this.isAnimating)return!1;this.isAnimating=!0,this._menuOut();var e=this.menusArr[this.menusArr[this.current].backIdx].menuEl;this._menuIn(e),this.options.breadcrumbsCtrl&&this.breadcrumbsCtrl.removeChild(this.breadcrumbsCtrl.lastElementChild)},a.prototype._menuOut=function(e){var t=this,n=this.menusArr[this.current].menuEl,i=void 0===e;this.menusArr[this.current].menuItems.forEach(function(n,r){n.style.WebkitAnimationDelay=n.style.animationDelay=i?parseInt(r*t.options.itemsDelayInterval)+"ms":parseInt(Math.abs(e-r)*t.options.itemsDelayInterval)+"ms"}),"r2l"===this.options.direction?b.add(n,i?"animate-outToRight":"animate-outToLeft"):b.add(n,i?"animate-outToLeft":"animate-outToRight")},a.prototype._menuIn=function(e,t){var n=this,i=this.menusArr[this.current].menuEl,r=void 0===t,a=this.menus.indexOf(e),s=this.menusArr[a].menuItems,o=s.length;n.el.style.minHeight=e.clientHeight+n.options.heightTolerance+"px",s.forEach(function(s,m){s.style.WebkitAnimationDelay=s.style.animationDelay=r?parseInt(m*n.options.itemsDelayInterval)+"ms":parseInt(Math.abs(t-m)*n.options.itemsDelayInterval)+"ms",m===(t<=o/2||r?o-1:0)&&d(s,function(){"r2l"===n.options.direction?(b.remove(i,r?"animate-outToRight":"animate-outToLeft"),b.remove(e,r?"animate-inFromLeft":"animate-inFromRight")):(b.remove(i,r?"animate-outToLeft":"animate-outToRight"),b.remove(e,r?"animate-inFromRight":"animate-inFromLeft")),b.remove(i,"znSdHead-menuList--current"),b.add(e,"znSdHead-menuList--current"),n.current=a,r?0===n.current&&n.options.backCtrl&&b.add(n.backCtrl,"znSdHead-menuBack--hidden"):(n.options.backCtrl&&b.remove(n.backCtrl,"znSdHead-menuBack--hidden"),n._addBreadcrumb(a)),n.isAnimating=!1})}),"r2l"===this.options.direction?b.add(e,r?"animate-inFromLeft":"animate-inFromRight"):b.add(e,r?"animate-inFromRight":"animate-inFromLeft")},a.prototype._emptyBreadcrumb=function(){if(!this.options.breadcrumbsCtrl)return!1;this.breadcrumbsCtrl.hasChildNodes()&&this.breadcrumbsCtrl.childNodes[0].remove()},a.prototype._addBreadcrumb=function(e){if(!this.options.breadcrumbsCtrl)return!1;var t=n.createElement("a");t.innerHTML=e?this.menusArr[e].name:this.options.initialBreadcrumb,this.breadcrumbsCtrl.appendChild(t);var i=this;t.addEventListener("click",function(n){if(n.preventDefault(),!t.nextSibling||i.isAnimating)return!1;i.isAnimating=!0,i._menuOut();var r=i.menusArr[e].menuEl;i._menuIn(r);for(var a;a=t.nextSibling;)i.breadcrumbsCtrl.removeChild(a)})},t.MLMenu=a;var c,l,h;"classList"in n.documentElement?(c=function(e,t){return e.classList.contains(t)},l=function(e,t){e.classList.add(t)},h=function(e,t){e.classList.remove(t)}):(c=function(e,t){return s(t).test(e.className)},l=function(e,t){c(e,t)||(e.className=e.className+" "+t)},h=function(e,t){e.className=e.className.replace(s(t)," ")});var b={hasClass:c,addClass:l,removeClass:h,toggleClass:o,has:c,add:l,remove:h,toggle:o};"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b:t.classie=b}(jQuery,window,document);